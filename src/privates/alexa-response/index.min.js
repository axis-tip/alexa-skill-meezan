"use strict";var alexaSsml=require("alexa-ssml"),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},asyncGenerator=function(){function e(e){this.value=e}function t(t){function n(e,t){return new Promise(function(n,s){var i={key:e,arg:t,resolve:n,reject:s,next:null};a?a=a.next=i:(o=a=i,r(e,t))})}function r(n,o){try{var a=t[n](o),i=a.value;i instanceof e?Promise.resolve(i.value).then(function(e){r("next",e)},function(e){r("throw",e)}):s(a.done?"return":"normal",a.value)}catch(e){s("throw",e)}}function s(e,t){switch(e){case"return":o.resolve({value:t,done:!0});break;case"throw":o.reject(t);break;default:o.resolve({value:t,done:!1})}o=o.next,o?r(o.key,o.arg):a=null}var o,a;this._invoke=n,"function"!=typeof t.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new t(e.apply(this,arguments))}},await:function(t){return new e(t)}}}(),classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},objectWithoutProperties=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},CardType={LinkAccount:"LinkAccount",Simple:"Simple",Standard:"Standard"},SpeechType={PlainText:"PlainText",SSML:"SSML"},DirectiveType={Play:"AudioPlayer.Play",Stop:"AudioPlayer.Stop",ClearQueue:"AudioPlayer.ClearQueue"},AudioPlayerPlayBehaviorType={Enqueue:"ENQUEUE",ReplaceAll:"REPLACE_ALL",ReplaceEnqueued:"REPLACE_ENQUEUED"},AudioPlayerClearQueueBehaviorType={ClearAll:"CLEAR_ALL",ClearEnqueued:"CLEAR_ENQUEUED"},Response=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};classCallCheck(this,e),this.state=t}return createClass(e,[{key:"ask",value:function(e,t){return this.say(e,t).shouldEndSession(!1)}},{key:"say",value:function(t,n){return new e(_extends({},this.state,{response:_extends({},this.state.response,{shouldEndSession:!0},outputSpeech(t,n))}))}},{key:"reprompt",value:function(t,n){return new e(_extends({},this.state,{response:_extends({},this.state.response,{reprompt:_extends({},outputSpeech(t,n))})}))}},{key:"card",value:function(t){var n=t.type,r=void 0===n?CardType.Simple:n,s=objectWithoutProperties(t,["type"]);return new e(_extends({},this.state,{response:_extends({},this.state.response,{card:_extends({},s,r&&{type:r})})}))}},{key:"audio",value:function(t){var n=t.type,r=void 0===n?DirectiveType.Stop:n,s=t.playBehavior,o=void 0===s?AudioPlayerPlayBehaviorType.ReplaceAll:s,a=t.clearBehavior,i=void 0===a?AudioPlayerClearQueueBehaviorType.ClearAll:a,u=objectWithoutProperties(t,["type","playBehavior","clearBehavior"]);return new e(_extends({},this.state,{response:_extends({},this.state.response,{directives:[_extends({},r&&{type:r},r===DirectiveType.Play&&{playBehavior:o},r===DirectiveType.Play&&{audioItem:{stream:_extends({},u)}},r===DirectiveType.ClearQueue&&{clearBehavior:i})]})}))}},{key:"attributes",value:function(t){return new e(_extends({},this.state,{sessionAttributes:_extends({},this.state.sessionAttributes,t)}))}},{key:"shouldEndSession",value:function(t){return new e(_extends({},this.state,{response:_extends({},this.state.response,{shouldEndSession:t})}))}},{key:"build",value:function(e){return _extends({version:"1.0"},this.state,{response:_extends({shouldEndSession:!0},this.state.response)},e||this.state.sessionAttributes?{sessionAttributes:_extends({},e,this.state.sessionAttributes)}:null)}}]),e}();Response.ask=function(){var e;return(e=new Response).ask.apply(e,arguments)},Response.say=function(){var e;return(e=new Response).say.apply(e,arguments)},Response.card=function(){var e;return(e=new Response).card.apply(e,arguments)},Response.audio=function(){var e;return(e=new Response).audio.apply(e,arguments)},Response.reprompt=function(){var e;return(e=new Response).reprompt.apply(e,arguments)},Response.shouldEndSession=function(){var e;return(e=new Response).shouldEndSession.apply(e,arguments)},Response.build=function(e){return Object.keys(e).reduce(function(t,n){var r=e[n],s="string"==typeof r?r:r,o="string"==typeof r?void 0:r.type;switch(n){case"ask":return t.ask(s,o);case"say":return t.say(s,o);case"reprompt":return t.reprompt(s,o);case"card":return t.card(r);case"audio":return t.audio(r);case"attributes":return t.attributes(r);case"shouldEndSession":return t.shouldEndSession(r)}},new Response)};var outputSpeech=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:SpeechType.PlainText;if(t===SpeechType.SSML||"object"===("undefined"==typeof e?"undefined":_typeof(e))){var n="object"===("undefined"==typeof e?"undefined":_typeof(e))?alexaSsml.renderToString(e):e;return{outputSpeech:{type:SpeechType.SSML,ssml:n}}}return{outputSpeech:{type:t,text:e}}},ask=Response.ask,say=Response.say,card=Response.card,audio=Response.audio,reprompt=Response.reprompt,shouldEndSession=Response.shouldEndSession,build=Response.build;exports.CardType=CardType,exports.SpeechType=SpeechType,exports.DirectiveType=DirectiveType,exports.AudioPlayerPlayBehaviorType=AudioPlayerPlayBehaviorType,exports.AudioPlayerClearQueueBehaviorType=AudioPlayerClearQueueBehaviorType,exports.default=Response,exports.ask=ask,exports.say=say,exports.card=card,exports.audio=audio,exports.reprompt=reprompt,exports.shouldEndSession=shouldEndSession,exports.build=build;